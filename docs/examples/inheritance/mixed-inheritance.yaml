# Mixed Inheritance Patterns
# Demonstrates all three inheritance types in one schema

columns:
  # Base types
  id:
    type: integer
    sequence: true

  name:
    type: varchar
    size: 100

  amount:
    type: numeric
    size: 10
    decimal: 2

  timestamp:
    type: timestamp

  # Enhanced types (using $ref inheritance)
  primary_id:
    $ref: id
    primary_key: true

  unique_name:
    $ref: name
    unique: true

  currency_amount:
    $ref: amount
    size: 15
    decimal: 4

tables:
  companies:
    columns:
      # Using enhanced reusable column with $ref
      company_id:
        $ref: primary_id

      # Using string inheritance with renaming
      company_name: unique_name

      # Using null inheritance (same name)
      timestamp: null

      # Direct definition (no inheritance)
      industry:
        type: varchar
        size: 50

  employees:
    columns:
      # Using enhanced reusable column
      employee_id:
        $ref: primary_id

      # Using string inheritance
      full_name: name

      # Using $ref with additional override
      salary:
        $ref: currency_amount
        # Inherits numeric(15,4) from currency_amount

      # Using null inheritance
      timestamp: null

  transactions:
    foreign_keys:
      company_fk:
        table: companies

    columns:
      # Mixing inheritance types in one table
      transaction_id:
        $ref: id
        primary_key: true

      description: name    # String inheritance
      amount: null         # Null inheritance
      timestamp: null      # Null inheritance

      # Override with additional automation
      large_amount:
        $ref: currency_amount
        automation:
          type: SUM
          table: line_items
          foreign_key: transaction_fk
          column: amount

  line_items:
    foreign_keys:
      transaction_fk:
        table: transactions

    columns:
      line_id:
        $ref: primary_id

      item_name: name
      amount: null
      timestamp: null

# Result demonstrates flexibility:
# - companies: company_id (int, seq, pk), company_name (varchar(100), unique), timestamp, industry
# - employees: employee_id (int, seq, pk), full_name (varchar(100)), salary (numeric(15,4)), timestamp
# - transactions: transaction_id (int, seq, pk), description (varchar(100)), amount (numeric(10,2)), timestamp, large_amount (numeric(15,4) with automation)
# - line_items: line_id (int, seq, pk), item_name (varchar(100)), amount (numeric(10,2)), timestamp