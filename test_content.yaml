columns:
  amount:
    type: numeric
    size: 10
    decimal: 2
  category:
    type: varchar
    size: 50

tables:
  categories:
    columns:
      category:
        $ref: category
        primary_key: true
      debits:
        $ref: amount
        automation:
          type: SUM
          table: accounts
          foreign_key: fk_categories
          column: debits
      credits:
        $ref: amount
        automation:
          type: SUM
          table: ledger
          foreign_key: fk_categories
          column: credits
      balance:
        $ref: amount
        calculated: "debits - credits"
    content:
      - category: "INCOME"
      - category: "EXPENSE"
      - category: "ASSET"
      - category: "LIABILITY"
      - category: "EQUITY"

  accounts:
    foreign_keys:
      fk_categories: { table: categories }
    columns:
      account_id:
        type: integer
        primary_key: true
        sequence: true
      debits:
        $ref: amount

  ledger:
    foreign_keys:
      fk_categories: { table: categories }
    columns:
      ledger_id:
        type: integer
        primary_key: true
        sequence: true
      credits:
        $ref: amount